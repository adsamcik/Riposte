{
  "formatVersion": 1,
  "database": {
    "version": 7,
    "identityHash": "4d1dd84cf014031695c43b2aa7bbc05f",
    "entities": [
      {
        "tableName": "memes",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `filePath` TEXT NOT NULL, `fileName` TEXT NOT NULL, `mimeType` TEXT NOT NULL, `width` INTEGER NOT NULL, `height` INTEGER NOT NULL, `fileSizeBytes` INTEGER NOT NULL, `importedAt` INTEGER NOT NULL, `emojiTagsJson` TEXT NOT NULL, `title` TEXT, `description` TEXT, `textContent` TEXT, `searchPhrasesJson` TEXT, `embedding` BLOB, `isFavorite` INTEGER NOT NULL, `createdAt` INTEGER NOT NULL, `useCount` INTEGER NOT NULL, `primaryLanguage` TEXT, `localizationsJson` TEXT, `viewCount` INTEGER NOT NULL, `lastViewedAt` INTEGER, `fileHash` TEXT, `basedOn` TEXT, `perceptualHash` INTEGER)",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "filePath",
            "columnName": "filePath",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "fileName",
            "columnName": "fileName",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "mimeType",
            "columnName": "mimeType",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "width",
            "columnName": "width",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "height",
            "columnName": "height",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "fileSizeBytes",
            "columnName": "fileSizeBytes",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "importedAt",
            "columnName": "importedAt",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "emojiTagsJson",
            "columnName": "emojiTagsJson",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "title",
            "columnName": "title",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "description",
            "columnName": "description",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "textContent",
            "columnName": "textContent",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "searchPhrasesJson",
            "columnName": "searchPhrasesJson",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "embedding",
            "columnName": "embedding",
            "affinity": "BLOB"
          },
          {
            "fieldPath": "isFavorite",
            "columnName": "isFavorite",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "createdAt",
            "columnName": "createdAt",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "useCount",
            "columnName": "useCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "primaryLanguage",
            "columnName": "primaryLanguage",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "localizationsJson",
            "columnName": "localizationsJson",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "viewCount",
            "columnName": "viewCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "lastViewedAt",
            "columnName": "lastViewedAt",
            "affinity": "INTEGER"
          },
          {
            "fieldPath": "fileHash",
            "columnName": "fileHash",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "basedOn",
            "columnName": "basedOn",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "perceptualHash",
            "columnName": "perceptualHash",
            "affinity": "INTEGER"
          }
        ],
        "primaryKey": {
          "autoGenerate": true,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_memes_importedAt",
            "unique": false,
            "columnNames": [
              "importedAt"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_memes_importedAt` ON `${TABLE_NAME}` (`importedAt`)"
          },
          {
            "name": "index_memes_isFavorite",
            "unique": false,
            "columnNames": [
              "isFavorite"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_memes_isFavorite` ON `${TABLE_NAME}` (`isFavorite`)"
          },
          {
            "name": "index_memes_filePath",
            "unique": true,
            "columnNames": [
              "filePath"
            ],
            "orders": [],
            "createSql": "CREATE UNIQUE INDEX IF NOT EXISTS `index_memes_filePath` ON `${TABLE_NAME}` (`filePath`)"
          },
          {
            "name": "index_memes_viewCount",
            "unique": false,
            "columnNames": [
              "viewCount"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_memes_viewCount` ON `${TABLE_NAME}` (`viewCount`)"
          },
          {
            "name": "index_memes_lastViewedAt",
            "unique": false,
            "columnNames": [
              "lastViewedAt"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_memes_lastViewedAt` ON `${TABLE_NAME}` (`lastViewedAt`)"
          },
          {
            "name": "index_memes_fileHash",
            "unique": false,
            "columnNames": [
              "fileHash"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_memes_fileHash` ON `${TABLE_NAME}` (`fileHash`)"
          },
          {
            "name": "index_memes_perceptualHash",
            "unique": false,
            "columnNames": [
              "perceptualHash"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_memes_perceptualHash` ON `${TABLE_NAME}` (`perceptualHash`)"
          }
        ]
      },
      {
        "tableName": "memes_fts",
        "createSql": "CREATE VIRTUAL TABLE IF NOT EXISTS `${TABLE_NAME}` USING FTS4(`fileName` TEXT NOT NULL, `emojiTagsJson` TEXT NOT NULL, `title` TEXT, `description` TEXT, `textContent` TEXT, `searchPhrasesJson` TEXT, `basedOn` TEXT, content=`memes`)",
        "fields": [
          {
            "fieldPath": "fileName",
            "columnName": "fileName",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "emojiTagsJson",
            "columnName": "emojiTagsJson",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "title",
            "columnName": "title",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "description",
            "columnName": "description",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "textContent",
            "columnName": "textContent",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "searchPhrasesJson",
            "columnName": "searchPhrasesJson",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "basedOn",
            "columnName": "basedOn",
            "affinity": "TEXT"
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": []
        },
        "ftsVersion": "FTS4",
        "ftsOptions": {
          "tokenizer": "simple",
          "tokenizerArgs": [],
          "contentTable": "memes",
          "languageIdColumnName": "",
          "matchInfo": "FTS4",
          "notIndexedColumns": [],
          "prefixSizes": [],
          "preferredOrder": "ASC"
        },
        "contentSyncTriggers": [
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_memes_fts_BEFORE_UPDATE BEFORE UPDATE ON `memes` BEGIN DELETE FROM `memes_fts` WHERE `docid`=OLD.`rowid`; END",
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_memes_fts_BEFORE_DELETE BEFORE DELETE ON `memes` BEGIN DELETE FROM `memes_fts` WHERE `docid`=OLD.`rowid`; END",
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_memes_fts_AFTER_UPDATE AFTER UPDATE ON `memes` BEGIN INSERT INTO `memes_fts`(`docid`, `fileName`, `emojiTagsJson`, `title`, `description`, `textContent`, `searchPhrasesJson`, `basedOn`) VALUES (NEW.`rowid`, NEW.`fileName`, NEW.`emojiTagsJson`, NEW.`title`, NEW.`description`, NEW.`textContent`, NEW.`searchPhrasesJson`, NEW.`basedOn`); END",
          "CREATE TRIGGER IF NOT EXISTS room_fts_content_sync_memes_fts_AFTER_INSERT AFTER INSERT ON `memes` BEGIN INSERT INTO `memes_fts`(`docid`, `fileName`, `emojiTagsJson`, `title`, `description`, `textContent`, `searchPhrasesJson`, `basedOn`) VALUES (NEW.`rowid`, NEW.`fileName`, NEW.`emojiTagsJson`, NEW.`title`, NEW.`description`, NEW.`textContent`, NEW.`searchPhrasesJson`, NEW.`basedOn`); END"
        ]
      },
      {
        "tableName": "emoji_tags",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`memeId` INTEGER NOT NULL, `emoji` TEXT NOT NULL, `emojiName` TEXT NOT NULL, PRIMARY KEY(`memeId`, `emoji`), FOREIGN KEY(`memeId`) REFERENCES `memes`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "memeId",
            "columnName": "memeId",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "emoji",
            "columnName": "emoji",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "emojiName",
            "columnName": "emojiName",
            "affinity": "TEXT",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "memeId",
            "emoji"
          ]
        },
        "indices": [
          {
            "name": "index_emoji_tags_emoji",
            "unique": false,
            "columnNames": [
              "emoji"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_emoji_tags_emoji` ON `${TABLE_NAME}` (`emoji`)"
          },
          {
            "name": "index_emoji_tags_memeId",
            "unique": false,
            "columnNames": [
              "memeId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_emoji_tags_memeId` ON `${TABLE_NAME}` (`memeId`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "memes",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "memeId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "meme_embeddings",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `memeId` INTEGER NOT NULL, `embeddingType` TEXT NOT NULL, `embedding` BLOB NOT NULL, `dimension` INTEGER NOT NULL, `modelVersion` TEXT NOT NULL, `generatedAt` INTEGER NOT NULL, `sourceTextHash` TEXT, `needsRegeneration` INTEGER NOT NULL, `indexingAttempts` INTEGER NOT NULL, `lastAttemptAt` INTEGER, FOREIGN KEY(`memeId`) REFERENCES `memes`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "memeId",
            "columnName": "memeId",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "embeddingType",
            "columnName": "embeddingType",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "embedding",
            "columnName": "embedding",
            "affinity": "BLOB",
            "notNull": true
          },
          {
            "fieldPath": "dimension",
            "columnName": "dimension",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "modelVersion",
            "columnName": "modelVersion",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "generatedAt",
            "columnName": "generatedAt",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "sourceTextHash",
            "columnName": "sourceTextHash",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "needsRegeneration",
            "columnName": "needsRegeneration",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "indexingAttempts",
            "columnName": "indexingAttempts",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "lastAttemptAt",
            "columnName": "lastAttemptAt",
            "affinity": "INTEGER"
          }
        ],
        "primaryKey": {
          "autoGenerate": true,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_meme_embeddings_memeId_embeddingType",
            "unique": true,
            "columnNames": [
              "memeId",
              "embeddingType"
            ],
            "orders": [],
            "createSql": "CREATE UNIQUE INDEX IF NOT EXISTS `index_meme_embeddings_memeId_embeddingType` ON `${TABLE_NAME}` (`memeId`, `embeddingType`)"
          },
          {
            "name": "index_meme_embeddings_memeId",
            "unique": false,
            "columnNames": [
              "memeId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_meme_embeddings_memeId` ON `${TABLE_NAME}` (`memeId`)"
          },
          {
            "name": "index_meme_embeddings_modelVersion",
            "unique": false,
            "columnNames": [
              "modelVersion"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_meme_embeddings_modelVersion` ON `${TABLE_NAME}` (`modelVersion`)"
          },
          {
            "name": "index_meme_embeddings_generatedAt",
            "unique": false,
            "columnNames": [
              "generatedAt"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_meme_embeddings_generatedAt` ON `${TABLE_NAME}` (`generatedAt`)"
          },
          {
            "name": "index_meme_embeddings_needsRegeneration",
            "unique": false,
            "columnNames": [
              "needsRegeneration"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_meme_embeddings_needsRegeneration` ON `${TABLE_NAME}` (`needsRegeneration`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "memes",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "memeId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "import_requests",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `status` TEXT NOT NULL, `imageCount` INTEGER NOT NULL, `completedCount` INTEGER NOT NULL, `failedCount` INTEGER NOT NULL, `stagingDir` TEXT NOT NULL, `createdAt` INTEGER NOT NULL, `updatedAt` INTEGER NOT NULL, PRIMARY KEY(`id`))",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "status",
            "columnName": "status",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "imageCount",
            "columnName": "imageCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "completedCount",
            "columnName": "completedCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "failedCount",
            "columnName": "failedCount",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "stagingDir",
            "columnName": "stagingDir",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "createdAt",
            "columnName": "createdAt",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "updatedAt",
            "columnName": "updatedAt",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        }
      },
      {
        "tableName": "import_request_items",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` TEXT NOT NULL, `requestId` TEXT NOT NULL, `stagedFilePath` TEXT NOT NULL, `originalFileName` TEXT NOT NULL, `emojis` TEXT NOT NULL, `title` TEXT, `description` TEXT, `extractedText` TEXT, `status` TEXT NOT NULL, `errorMessage` TEXT, `metadataJson` TEXT, PRIMARY KEY(`id`), FOREIGN KEY(`requestId`) REFERENCES `import_requests`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "requestId",
            "columnName": "requestId",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "stagedFilePath",
            "columnName": "stagedFilePath",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "originalFileName",
            "columnName": "originalFileName",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "emojis",
            "columnName": "emojis",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "title",
            "columnName": "title",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "description",
            "columnName": "description",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "extractedText",
            "columnName": "extractedText",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "status",
            "columnName": "status",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "errorMessage",
            "columnName": "errorMessage",
            "affinity": "TEXT"
          },
          {
            "fieldPath": "metadataJson",
            "columnName": "metadataJson",
            "affinity": "TEXT"
          }
        ],
        "primaryKey": {
          "autoGenerate": false,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_import_request_items_requestId",
            "unique": false,
            "columnNames": [
              "requestId"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_import_request_items_requestId` ON `${TABLE_NAME}` (`requestId`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "import_requests",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "requestId"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      },
      {
        "tableName": "potential_duplicates",
        "createSql": "CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `memeId1` INTEGER NOT NULL, `memeId2` INTEGER NOT NULL, `hammingDistance` INTEGER NOT NULL, `detectionMethod` TEXT NOT NULL, `status` TEXT NOT NULL, `detectedAt` INTEGER NOT NULL, FOREIGN KEY(`memeId1`) REFERENCES `memes`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE , FOREIGN KEY(`memeId2`) REFERENCES `memes`(`id`) ON UPDATE NO ACTION ON DELETE CASCADE )",
        "fields": [
          {
            "fieldPath": "id",
            "columnName": "id",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "memeId1",
            "columnName": "memeId1",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "memeId2",
            "columnName": "memeId2",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "hammingDistance",
            "columnName": "hammingDistance",
            "affinity": "INTEGER",
            "notNull": true
          },
          {
            "fieldPath": "detectionMethod",
            "columnName": "detectionMethod",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "status",
            "columnName": "status",
            "affinity": "TEXT",
            "notNull": true
          },
          {
            "fieldPath": "detectedAt",
            "columnName": "detectedAt",
            "affinity": "INTEGER",
            "notNull": true
          }
        ],
        "primaryKey": {
          "autoGenerate": true,
          "columnNames": [
            "id"
          ]
        },
        "indices": [
          {
            "name": "index_potential_duplicates_memeId1",
            "unique": false,
            "columnNames": [
              "memeId1"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_potential_duplicates_memeId1` ON `${TABLE_NAME}` (`memeId1`)"
          },
          {
            "name": "index_potential_duplicates_memeId2",
            "unique": false,
            "columnNames": [
              "memeId2"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_potential_duplicates_memeId2` ON `${TABLE_NAME}` (`memeId2`)"
          },
          {
            "name": "index_potential_duplicates_status",
            "unique": false,
            "columnNames": [
              "status"
            ],
            "orders": [],
            "createSql": "CREATE INDEX IF NOT EXISTS `index_potential_duplicates_status` ON `${TABLE_NAME}` (`status`)"
          },
          {
            "name": "index_potential_duplicates_memeId1_memeId2",
            "unique": true,
            "columnNames": [
              "memeId1",
              "memeId2"
            ],
            "orders": [],
            "createSql": "CREATE UNIQUE INDEX IF NOT EXISTS `index_potential_duplicates_memeId1_memeId2` ON `${TABLE_NAME}` (`memeId1`, `memeId2`)"
          }
        ],
        "foreignKeys": [
          {
            "table": "memes",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "memeId1"
            ],
            "referencedColumns": [
              "id"
            ]
          },
          {
            "table": "memes",
            "onDelete": "CASCADE",
            "onUpdate": "NO ACTION",
            "columns": [
              "memeId2"
            ],
            "referencedColumns": [
              "id"
            ]
          }
        ]
      }
    ],
    "setupQueries": [
      "CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)",
      "INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, '4d1dd84cf014031695c43b2aa7bbc05f')"
    ]
  }
}